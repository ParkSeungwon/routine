{"version":3,"sources":["popup.tsx","todo.tsx","tab.tsx","App.tsx"],"names":["Popup","show","this","forceUpdate","i","props","func","ModalComponent","Platform","OS","Modal","undefined","isVisible","style","styles","container","KeyboardAvoidingView","behavior","text","children","View","foot","buttons","map","s","raised","type","button","key","title","onPress","on_click","Component","StyleSheet","create","justifyContent","marginTop","flexDirection","padding","fontSize","ToDo","state","todos","check","todo","setState","item","index","drag","isActive","checked","bind","onLongPress","data","splice","from","to","renderItem","render_item","keyExtractor","onDragBegin","onDragEnd","set_data","MyTab","current","input_text","isTab","load","a","async","AsyncStorage","getItem","JSON","parse","console","log","select_tab","save","setItem","stringify","_handleAppStateChange","nextAppState","remove_tab","remove_to_do","push","length","refs","error","run","enter","popup","callapi","set","to_del","show_popup","show_confirm","reset","selectedIndex","tab","ref","done","over","placeholder","onChangeText","txt","popup_callback","AppState","addEventListener","removeEventListener","flex","width","Dimensions","get","App","SafeAreaView","paddingTop","backgroundColor","alignItems"],"mappings":"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","file":"static/js/app.696ca96a.chunk.js","sourcesContent":["import Modal from 'modal-react-native-web';\nimport React, { Component } from 'react'\nimport { View, StyleSheet, ScrollView, Platform, KeyboardAvoidingView } from 'react-native'\nimport { Overlay, Text, Button } from 'react-native-elements';\n\nexport class Popup extends Component {\n  protected show:bool = false;\n  run() {\n    this.show = true;\n    this.forceUpdate();\n  }\n  on_click(i:number) {\n    this.show = false;\n    this.forceUpdate();\n    this.props.func(i);\n  }\n  render() {\n    return (\n      <Overlay ModalComponent={ Platform.OS == 'web' ? Modal : undefined} \n        isVisible={this.show} style={styles.container}>\n        <KeyboardAvoidingView behavior='padding' style={styles.container} >\n          <Text style={styles.text}>{this.props.text}</Text>\n          {this.props.children}\n          <View style={styles.foot}>\n            {this.props.buttons.map((s:string, i)=>{ \n              return <Button raised type='outline' style={styles.button}\n                key={i} title={s} onPress={() => { this.on_click(i) }} />\n            })}\n          </View>\n        </KeyboardAvoidingView>\n      </Overlay>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: 'flex-start',\n    //backgroundColor: '#0f0',\n    //alignItems: '',\n  },\n  foot: {\n    marginTop: 5,\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n  }, \n  button: {\n    padding:1,\n  },\n  text: {\n    fontSize: 22,\n    padding: 10\n  },\n});\n","import React, { Component } from 'react';\nimport { CheckBox } from 'react-native-elements';\nimport DraggableFlatList, { RenderItemParams, } from \"react-native-draggable-flatlist\";\n//--legacy-peer-deps option was needed to install this\n\nclass ToDoData {\n  todo:string = '';\n  check:bool = false;\n};\n\nexport class ToDo extends Component {\n  state = {\n    todos: ()=>{return [];}//this is equivalent of C pointer\n  }\n\n  private on_click(i:number) {\n    this.state.todos()[i].check = !this.state.todos()[i].check;//!undefined == true\n    this.forceUpdate();\n  }\n  set(todo:TodoData[]) {\n    this.setState({todos: ()=> {return todo;}});\n  }\n  private render_item({item, index, drag, isActive}:RenderItemParams<string[]>) {\n    return (\n      <CheckBox\n        title={item.todo}\n        checked={item.check}\n        onPress={this.on_click.bind(this, index)}\n        onLongPress={drag}\n      />\n    )\n  }\n  private set_data(data) {//{from:number, to:number, data:}\n    let [todo] = this.state.todos().splice(data.from, 1);\n    this.state.todos().splice(data.to, 0, todo);\n    this.forceUpdate();\n  }\n  render() {\n    return (\n      <DraggableFlatList\n        data={this.state.todos()}\n        renderItem={this.render_item.bind(this)}\n        keyExtractor={(item, index) => {return `draggable-item-${item, index}`;}}\n        onDragBegin={(index)=>{}}\n        //simultaneousHandlers={this.refs.scroll}\n        onDragEnd={this.set_data.bind(this)}\n        //activationDistance={20}\n      />\n    )\n  }\n};\n","import React, { Component} from 'react'\nimport { Dimensions, View, Text, StyleSheet, ScrollView, AppState } from 'react-native'\nimport { FAB, Input, ButtonGroup, Button } from 'react-native-elements';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {Popup } from './popup.tsx'\nimport {ToDo} from './todo.tsx'\n\nclass TabData {\n  title:string = '';\n  todos:ToDoData[] = [];\n};\n\nexport class MyTab extends Component {\n  protected current:number = 0;\n  protected data:TabData[] = [];\n  protected input_text:string = '';\n  protected isTab:boolean = true;\n\n  protected popup_callback(i: number) {//confirm popup\n    console.log(i)//first button clicked 0\n    switch (i) {\n      case 0:\n        console.log('yes function' + this.isTab)\n        if (this.isTab) this.remove_tab();\n        else this.remove_to_do();\n        break;\n      case 1:\n        console.log('no function');\n    }\n    this.forceUpdate();\n  }\n\n  protected done(i:number):void {//text enter done\n    if(i == 1) return;\n    if (this.isTab) this.data.push({title: this.input_text, todos: []});\n    else {\n      if(this.data.length == 0) this.refs.error.run();\n      else this.data[this.current].todos.push( {todo: this.input_text, check: false});\n      this.select_tab(this.current);\n    }\n    this.forceUpdate();\n  }\n  protected show_popup(isTab:boolean) {\n    //this.input_text = '';\n    this.isTab = isTab;\n    this.refs.enter.run();\n  }\n  protected show_confirm(isTab:boolean) {\n    this.isTab = isTab;\n    this.refs.popup.run();\n  }\n  protected remove_tab() {\n    if(this.data.length > 0) {\n      this.data.splice(this.current, 1);\n      if (this.current > 0) this.current--;\n      if (this.data.length > 0) this.refs.callapi.set(this.data[this.current].todos);\n      else this.refs.callapi.set([]);\n      this.forceUpdate();\n    }\n  }\n  protected remove_to_do() {\n    if(this.data.length == 0) return;\n    if(this.data[this.current].todos.length == 0) return;\n    let to_del:number[] = [];\n    for(let i=this.data[this.current].todos.length-1; i>=0; i--) \n      if(this.data[this.current].todos[i].check) to_del.push(i);\n    console.log('to_del array : ')\n    console.log(to_del);\n    for(let i of to_del) this.data[this.current].todos.splice(i, 1);\n    //this.refs.callapi.forceUpdate();\n  }\n  protected reset() {\n    if(this.data.length == 0) return;\n    for(let ch of this.data[this.current].todos) ch.check = false;\n    this.refs.callapi.forceUpdate();\n  }\n  protected select_tab(index:int) {\n    this.current = index;\n    if(this.data[this.current]) {\n      this.refs.callapi.set(this.data[this.current].todos);\n      this.forceUpdate();\n    }\n  }\n  render() {\n    return (\n      <View style={styles.container}>\n        <View style={styles.foot}>\n          <Button title='Tab+' onPress={()=>{this.show_popup(true);}} type='outline' raised style={styles.button} />\n          <Button title='Tab-' onPress={this.show_confirm.bind(this, true)} type='outline' raised style={styles.button} />\n          <Button title='Item+' onPress={this.show_popup.bind(this, false)} type='outline' raised style={styles.button} />\n          <Button title='Item-' onPress={this.show_confirm.bind(this, false)} type='outline' raised style={styles.button} />\n          <Button title='reset' onPress={this.reset.bind(this)} type='outline' raised style={styles.button}/>\n          {/*<Button title='save' onPress={this.save} />*/}\n          {/*<Button title='load' onPress={this.load} />*/}\n        </View>\n\n        <ButtonGroup \n          selectedIndex={this.current} \n          buttons={this.data.map((tab)=>{return tab.title;})} \n          onPress={this.select_tab.bind(this)}\n        />\n          <ToDo ref='callapi' />\n\n        <Popup ref='enter'\n          text='' \n          func={this.done.bind(this)} \n          buttons={['Done', 'Cancel']}\n        >\n          <View style={styles.over}>\n          <Input placeholder='enter text' onChangeText={(txt)=>{this.input_text = txt}} />\n          </View>\n        </Popup>\n\n        <Popup ref='popup' \n          func={this.popup_callback.bind(this)} \n          text='Are you sure?' \n          buttons={['Confirm', 'Cancel']}\n        />\n        <Popup ref='error'\n          func={(i)=>{}}\n          text='Create Tab first!!'\n          buttons={['OK']}\n        />\n        </View>\n    );\n  }\n\n  protected load  = async () => {\n    try {\n      const data = await AsyncStorage.getItem('data');\n      if(data != null) //for first launch\n        this.data = JSON.parse(data);\n      console.log('loading...\\n');\n      console.log(this.data);\n      this.current = 0;\n      this.select_tab(0);\n      this.forceUpdate();\n    } catch (error) {\n    }\n  }\n\n  protected save = async () => {\n      try {\n        await AsyncStorage.setItem('data', JSON.stringify(this.data));\n        console.log('saving...\\n');\n        console.log(this.data);\n      } catch (error) {\n      }\n    };\n\n  componentDidMount() {\n    this.load();\n    AppState.addEventListener('change', this._handleAppStateChange);\n    console.log('componentDidMount');\n    //if(this.data.length == 0) this.titles.push('+');\n  }\n\n\n  componentWillUnmount() {\n    AppState.removeEventListener('change', this._handleAppStateChange);\n  }\n\n  _handleAppStateChange = (nextAppState) => {\n    if (nextAppState === 'background' || nextAppState === 'inactive') this.save();\n  };\n\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%'\n    //backgroundColor: '#0f0',\n    //alignItems: '',\n    //justifyContent: 'center',\n  },\n  foot: {\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'center',\n  }, \n  button: {\n    padding:1\n  },\n  over: {\n    width: Dimensions.get('window').width * 0.7\n  }\n});\n","import { StatusBar } from 'expo-status-bar';\nimport React from 'react';\nimport { StyleSheet, Text, View, SafeAreaView} from 'react-native';\nimport { MyTab } from './tab'\n\nexport default function App() {\n  return (\n    <SafeAreaView style={styles.container}>\n      <MyTab />\n    </SafeAreaView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 30,\n    backgroundColor: '#fff',\n    alignItems: 'flex-start',\n    justifyContent: 'flex-start',\n  },\n});\n"],"sourceRoot":""}